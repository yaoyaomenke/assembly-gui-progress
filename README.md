# Tkinter 调试器项目文档

## 项目概述

这是一个基于调试器的 Tkinter GUI 应用程序框架，通过在目标进程中插入 INT 指令来拦截和处理 GUI 操作，实现 C++ 与 Python Tkinter 之间的桥接,让大家更方便的使用汇编开发gui程序,不必再去调试繁琐的win32api

## 核心文件说明

- **main.cpp**: Python C API 函数加载和初始化
- **pythonf.cpp**: 主要的调试事件处理逻辑
- **pack_fun.cpp**: pack 布局管理器参数解析功能

## 中断功能详细说明

### 中断 10 - 测试中断
**功能**: 基础测试中断
**参数**: 无
**作用**: 打印字符 'a'，用于验证中断系统正常工作

### 中断 20 - 消息框
**功能**: 显示 Windows 消息框
**参数**:
- `RCX`: 消息文本字符串地址
- `RDX`: 对话框标题字符串地址  
- `R8`: 消息框样式标志
**返回值**: `RAX` 中返回用户选择的按钮ID

### 中断 21 - 创建主窗口
**功能**: 创建 Tkinter 根窗口
**参数**: 无
**返回值**: `RAX` 中返回 Tk 实例的指针

### 中断 22 - 设置窗口几何尺寸
**功能**: 设置窗口大小和位置
**参数**:
- `RCX`: Tk 窗口对象指针
- `RDX`: 几何尺寸字符串地址 (如 "400x300+100+100")

### 中断 23 - 标记窗口启动
**功能**: 标记 GUI 窗口已启动
**参数**:
- `RCX`: Tk 窗口对象指针
**作用**: 设置全局标志，开始处理窗口更新事件

### 中断 24 - 设置窗口标题
**功能**: 设置窗口标题文本
**参数**:
- `RCX`: Tk 窗口对象指针
- `RDX`: 标题文本字符串地址

### 中断 25 - 创建 Frame 框架
**功能**: 创建 Tkinter Frame 控件
**参数**:
- `RCX`: 父窗口对象指针
- `RDX`: padding 值字符串地址
**返回值**: `RAX` 中返回 Frame 对象指针

### 中断 26 - 创建 Button 按钮
**功能**: 创建 Tkinter Button 控件并绑定事件
**参数**:
- `RCX`: 父窗口对象指针
- `RDX`: 按钮文本字符串地址
- `R8`: 事件名称字符串地址 (为0时不绑定事件)
**返回值**: `RAX` 中返回 Button 对象指针

### 中断 27 - Pack 布局管理
**功能**: 使用 pack 几何管理器布局控件
**参数**:
- `RCX`: 要布局的控件对象指针
- `RDX`: 参数标志位
- `R8`: 参数数据起始地址

**参数标志位说明**:
- `0x01`: side - 停靠方向 ("left", "right", "top", "bottom")
- `0x02`: fill - 填充方式 ("none", "x", "y", "both")  
- `0x04`: expand - 扩展标志 (0/1)
- `0x08`: anchor - 锚点位置 ("n", "s", "e", "w", "center" 等)
- `0x10`: padx - 水平外间距 (像素)
- `0x20`: pady - 垂直外间距 (像素)
- `0x40`: ipadx - 水平内间距 (像素)
- `0x80`: ipady - 垂直内间距 (像素)

### 中断 28 - 读取窗口事件
**功能**: 从事件队列读取窗口事件
**参数**: 无
**返回值**: `RAX` 中返回事件字符串在目标进程中的地址

### 中断 29 - 销毁窗口
**功能**: 销毁 Tkinter 窗口
**参数**:
- `RCX`: 要销毁的窗口对象指针

### 中断 30 - 获取父窗口
**功能**: 获取控件的父窗口
**参数**:
- `RCX`: 控件对象指针
**返回值**: `RAX` 中返回父窗口对象指针

### 中断 31 - 创建 Label 标签
**功能**: 创建 Tkinter Label 控件
**参数**:
- `RCX`: 父窗口对象指针
- `RDX`: 标签文本字符串地址
- `R8`: 字体标识符
**返回值**: `RAX` 中返回 Label 对象指针

### 中断 32 - 创建 Text 文本框
**功能**: 创建 Tkinter Text 多行文本框
**参数**:
- `RCX`: 父窗口对象指针
- `RDX`: 宽度值地址
- `R8`: 高度值地址
**返回值**: `RAX` 中返回 Text 对象指针

### 中断 33 - 设置窗口可调整大小
**功能**: 设置窗口是否可调整大小
**参数**:
- `RCX`: Tk 窗口对象指针
- `RDX`: 宽度是否可调 (0/1)
- `R8`: 高度是否可调 (0/1)

### 中断 34 - 设置窗口图标
**功能**: 设置窗口图标
**参数**:
- `RCX`: Tk 窗口对象指针
- `RDX`: 图标文件路径字符串地址

## 辅助函数说明

### `get_parameter_string()`
从目标进程内存读取字符串参数

### `get_parameter_int()`  
从目标进程内存读取整型参数

### `parse_pack_parameters()`
解析 pack 布局管理器的复杂参数

### `next_string()`
生成唯一的事件处理函数名称

### `get_fun_string()`
生成 Python 事件处理函数代码

## 使用流程

1. 启动目标进程为调试模式
2. 加载 Python DLL 并初始化解释器
3. 创建命名管道用于 GUI 事件通信
4. 拦截目标进程的 INT 指令并处理相应功能
5. 通过 Python C API 创建和操作 Tkinter 界面
6. 处理窗口事件循环和消息传递

## 注意事项

- 所有字符串参数都是目标进程地址空间中的地址
- 需要确保目标进程具有适当的内存访问权限
- 事件处理函数名称会自动生成并递增
- 窗口启动后才开始处理更新事件
